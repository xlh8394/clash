mixed-port: 7890
tcp-concurrent: true
allow-lan: true
ipv6: true
log-level: info
unified-delay: true
global-client-fingerprint: chrome
find-process-mode: strict

dns:
    enable: true
    listen: 0.0.0.0:1053
    ipv6: true
    enhanced-mode: fake-ip
    fake-ip-range: 198.18.0.1/16
    fake-ip-filter: ["+.lan", "+.local", "+.direct", "+.msftconnecttest.com", "+.msftncsi.com", "geosite:cn"]
    nameserver: ["https://unfiltered.adguard-dns.com/dns-query", "180.76.76.76"]

geodata-mode: true
geox-url:
  geosite: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo/geosite-all.dat"
  geoip: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo/geoip.dat"
  mmdb: "hhttps://github.com/DustinWin/ruleset_geodata/releases/download/mihomo/Country.mmdb"
  asn: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo/Country-ASN.mmdb"

sniffer: { enable: true, sniff: { HTTP: { ports: [80], override-destination: true }, TLS: { ports: [443, 8443] }, QUIC: { ports: [443, 8443] } } }

tun:
  enable: true
  stack: mixed
  device: utun
  endpoint-independent-nat: true
  auto-route: false
  auto-detect-interface: false
  auto-redirect: false
  strict-route: false

profile:
  store-selected: true
  store-fake-ip: true

#å¤–éƒ¨èŠ‚ç‚¹
proxy-providers:

  é›¶æ•£èŠ‚ç‚¹:
    type: file
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300
    path: ./jiedian.yaml

atm: &atm  
  interval: 300
  url: http://www.gstatic.com/generate_204
  max-failed-times: 3
  
zhixuan: &zhixuan 
   type: smart
   include-all: true
   interval: 300

#ç­–ç•¥ç»„
proxy-groups:

    - name: æ‰‹åŠ¨é€‰æ‹©
      <<: *atm
      type: select
      proxies: ["æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      include-all: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Available.png

    - name: æ‰€æœ‰æ™ºé€‰
      <<: *zhixuan
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Auto.png

    - name: å›½å¤–ç½‘ç«™
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png

    - name: å›½å¤–åª’ä½“
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/ForeignMedia.png

    - name: YouTube
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png

    - name: Netflix
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Netflix.png

    - name: ç”µæŠ¥æ¶ˆæ¯
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram_X.png

    - name: æŽ¨ç‰¹æ¶ˆæ¯
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://fastly.jsdelivr.net/gh/shindgewongxj/WHATSINStash@master/icon/x.png

    - name: æ¸¸æˆå¹³å°
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Game.png

    - name: å¾®è½¯æœåŠ¡
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png

    - name: AI
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/OpenAI.png

    - name: Emby
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Emby.png

    - name: Spotify
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Spotify.png

#èŠ‚ç‚¹åˆ†åŒº
    - name: é¦™æ¸¯-æ™ºé€‰
      <<: *zhixuan
      filter: (?i)ðŸ‡­ðŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b)
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png

    - name: å°æ¹¾-æ™ºé€‰
      <<: *zhixuan
      filter: (?i)ðŸ‡¨ðŸ‡³|ðŸ‡¹ðŸ‡¼|å°æ¹¾|(\b(TW|Tai|Taiwan)\b)
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/China.png

    - name: æ–°åŠ å¡-æ™ºé€‰
      <<: *zhixuan
      filter: (?i)ðŸ‡¸ðŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|Singapore)\b)
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png

    - name: æ—¥æœ¬-æ™ºé€‰
      <<: *zhixuan
      filter: (?i)ðŸ‡¯ðŸ‡µ|æ—¥æœ¬|ä¸œäº¬|(\b(JP|Japan)\b)
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png

    - name: ç¾Žå›½-æ™ºé€‰
      <<: *zhixuan
      filter: (?i)ðŸ‡ºðŸ‡¸|ç¾Žå›½|æ´›æ‰çŸ¶|åœ£ä½•å¡ž|(\b(US|United States)\b)
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png

    - name: å…œåº•åˆ†æµ
      <<: *atm
      type: select
      proxies: ["æ‰‹åŠ¨é€‰æ‹©", "æ‰€æœ‰æ™ºé€‰", "é¦™æ¸¯-æ™ºé€‰", "å°æ¹¾-æ™ºé€‰", "æ–°åŠ å¡-æ™ºé€‰", "æ—¥æœ¬-æ™ºé€‰", "ç¾Žå›½-æ™ºé€‰", "DIRECT"]
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png

#è§„åˆ™é›†
guize: &guize
   type: http
   format: text
   interval: 86400
   behavior: classical

rule-providers:

    Google:
      <<: *guize
      url: https://github.com/Repcz/Tool/raw/X/mihomo/Rules/Google.list
      path: ./rules/Google.list

    Emby:
      <<: *guize
      url: https://github.com/Repcz/Tool/raw/X/mihomo/Rules/Emby.list
      path: /rules/Emby.list

    China:
      <<: *guize
      url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/ChinaMax/ChinaMax.list
      path: ./rules/China.list

    YouTube:
      <<: *guize
      url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/YouTube.list
      path: ./rules/YouTube.list

    Netflix:
      <<: *guize
      url: https://github.com/Repcz/Tool/raw/X/mihomo/Rules/Netflix.list
      path: ./rules/Netflix.list

    Spotify:
      <<: *guize
      url: https://github.com/Repcz/Tool/raw/X/mihomo/Rules/Spotify.list
      path: ./rules/Spotify.list

    Telegram:
      <<: *guize
      url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Telegram.list
      path: ./rules/Telegram.list

    Twitter:
      <<: *guize
      url: https://whatshub.top/rule/Twitter.list
      path: ./rules/Twitter.list

    Steam:
      <<: *guize
      url: https://github.com/Repcz/Tool/raw/X/mihomo/Rules/Steam.list
      path: ./rules/Steam.list

    AI:
      <<: *guize
      url: https://github.com/Repcz/Tool/raw/X/mihomo/Rules/AI.list
      path: ./rules/AI.list

    Global:
      <<: *guize
      url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list
      path: ./rules/Global.list

    Github:
      <<: *guize
      url: https://github.com/Repcz/Tool/raw/X/mihomo/Rules/Github.list
      path: ./rules/Github.list

    Microsoft:
      <<: *guize
      url: https://whatshub.top/rule/Microsoft.list
      path: ./rules/Microsoft.list

    Lan:
      <<: *guize
      url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Lan.list
      path: ./rules/Lan.list

    ProxyGFW:
      <<: *guize
      url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/ProxyGFW.list
      path: ./rules/ProxyGFW.list

rules:
    - PROCESS-NAME,dnplayer.exe,å›½å¤–ç½‘ç«™
    - DOMAIN-SUFFIX,hjd2048.com,å…œåº•åˆ†æµ
    - DOMAIN-SUFFIX,mypikpak.com,å…œåº•åˆ†æµ
    - DOMAIN-SUFFIX,access.pikpakdrive.com,å…œåº•åˆ†æµ
    - DOMAIN-KEYWORD,bigo,å›½å¤–ç½‘ç«™
    - DOMAIN-KEYWORD,cubetecn,å›½å¤–ç½‘ç«™
    - PROCESS-NAME,parfait_crash_handler.exe,å›½å¤–ç½‘ç«™
    - PROCESS-NAME,CapCut.exe,å›½å¤–ç½‘ç«™
    - RULE-SET,AI,AI
    - RULE-SET,Netflix,Netflix
    - RULE-SET,Github,å›½å¤–ç½‘ç«™
    - RULE-SET,Steam,æ¸¸æˆå¹³å°
    - RULE-SET,Emby,Emby
    - RULE-SET,YouTube,YouTube
    - RULE-SET,Telegram,ç”µæŠ¥æ¶ˆæ¯
    - RULE-SET,Twitter,æŽ¨ç‰¹æ¶ˆæ¯
    - RULE-SET,Spotify,Spotify
    - GEOSITE,microsoft,å¾®è½¯æœåŠ¡
    - RULE-SET,Google,å›½å¤–ç½‘ç«™
    - GEOSITE,gfw,å›½å¤–ç½‘ç«™
    - RULE-SET,Global,å›½å¤–ç½‘ç«™
    - GEOIP,lan,DIRECT
    - GEOIP,CN,DIRECT
    - RULE-SET,China,DIRECT
    - MATCH,å…œåº•åˆ†æµ
